<!--/* Base layout used for each page except error page */-->
<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" th:locale="${#locale}"
      th:fragment="html (title, resources, content, bodyClass)">
<head th:with="_title=${#strings.isEmpty(title) ? options['blog_title'] : (title + ' - ' + options['blog_title'])}">
    <title th:text="${_title}">Blog title</title>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="HandheldFriendly" content="True"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <!--/* Blog config */-->
    <meta name="robots" content="none" th:if="${options['seo_spider_disabled']}">
    <meta name="generator" th:content="${'Halo'}"/>
    <meta name="keywords" th:content="${meta_keywords ?: options['meta_keywords']}"/>
    <meta name="description" th:content="${meta_description ?: options['meta_description']}"/>
    <link rel="shortcut icon" type="images/x-icon"
          th:unless="${#strings.isEmpty(options['blog_favicon'])}" th:href="@{${options['blog_favicon']}}">

	<!--/* To avoid cached in browser by other themes, add query on custom resources */-->
    <link rel="stylesheet" type="text/css" th:href="@{/assets/built/screen.css(capser)}"/>
    <style>:root {--ghost-accent-color: #15171A;}</style>
	<style>
	.dropdown {
	  position: relative;
	  display: inline-block;
	}

	.dropdown-content {
	  display: none;
	  position: absolute;
	  background-color: #333;
	  overflow: auto;
	  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
	  z-index: 1;
	}

	.dropdown-content a {
	  padding: 5px 8px;
	  display: block;
	}

	.dropdown a.disabled {color: #999; cursor: default;}

	.show {display: block;}
	</style>
	
    <!--/* Global head */-->
    <th:block th:utext="${options['blog_custom_head']}"/>

    <th:block th:replace="${resources}">
        <!--/* Custom resources here */-->
    </th:block>
</head>

<body th:class="${bodyClass}">
<div class="viewport">
    <header id="gh-head" class="gh-head has-cover">
        <nav class="gh-head-inner inner gh-container">
            <div class="gh-head-brand">
                <a class="gh-head-logo" th:href="@{/}">
                    <img th:unless="${#strings.isEmpty(options['blog_logo'])}" th:src="${options['blog_logo']}"
                         th:alt="${options['blog_title']}"/>
                    <span th:if="${#strings.isEmpty(options['blog_logo'])}" th:text="${options['blog_title']}"></span>
                </a>
                <a class="gh-burger" role="button">
                    <div class="gh-burger-box">
                        <div class="gh-burger-inner"></div>
                    </div>
                </a>
            </div>

            <div class="gh-head-menu" th:insert="fragment/site-nav::nav">
               <!--/* Navigation here */-->
            </div>

            <div class="gh-head-actions">
                <div class="gh-social">
                </div>
                <!-- TODO search -->
                <!--               <div class="searchbox">
                                   <form method="get" action="/search" role="search">
                                       <input class="searchtxt" type="search" name="keyword" placeholder="Search" required>
                                       <a class="searchbtn" href="#"><i class="fa fa-search"></i></a>
                                   </form>
                               </div>-->

				<div class="dropdown" th:with="_locale=${#locale.toString()}">
				  <a class="dropdown-button" href="#" th:text="${#themes.code('language') ?: 'Lang'}">Lang</a>
				  <div class="dropdown-content">
					<a th:href="${_locale=='zh_CN' ? '#' : '?locale=zh_CN'}" th:class="${_locale=='zh_CN' ? 'disabled' : ''}">简</a>
					<a th:href="${_locale=='zh_TW' ? '#' : '?locale=zh_TW'}" th:class="${_locale=='zh_TW' ? 'disabled' : ''}">繁</a>
					<a th:href="${#locale.language=='ja' ? '#' : '?locale=ja'}" th:class="${#locale.language=='ja' ? 'disabled' : ''}">あ</a>
					<a th:href="${#locale.language=='en' ? '#' : '?locale=en'}" th:class="${#locale.language=='en' ? 'disabled' : ''}">en</a>
				  </div>
				</div>
            </div>
        </nav>
    </header>

    <main>
        <th:block th:replace="${content}">
            <!--/* Custom content here */-->
        </th:block>
    </main>

    <footer class="site-footer outer">
		<!--/* Global footer */-->
		<th:block th:utext="${options['blog_footer_info']}"/>
		
        <div class="inner">
            <section class="copyright">
                &copy; [[${#dates.format(#dates.createToday(),'yyyy')}]]
				<a th:href="@{/}" th:text="${options['blog_title']}"></a>
            </section>
            <nav class="site-footer-nav" th:insert="fragment/site-nav::footer-nav">
                Footer navigation
            </nav>
            <div>[[${#themes.code('poweredBy')}]]
                <a href="https://halo.run/" target="_blank" rel="noopener">Halo</a>
                &amp;
                <a href="https://github.com/chuntungho/casper-halo" target="_blank">Casper</a>
            </div>
        </div>
    </footer>
</div>

<script th:src="@{/assets/js/lib/jquery-3.5.1.min.js}"></script>
<script th:src="@{/assets/built/casper.js}"></script>
<script>
$(document).ready(function () {
    // Mobile Menu Trigger
    $('.gh-burger').click(function () {
        $('body').toggleClass('gh-head-open');
    });
    // FitVids - Makes video embeds responsive
    $(".gh-content").fitVids();
});
</script>

<script th:src="@{/assets/js/lib/vanilla-back-to-top.min.js}"></script>
<script>
$(document).ready(function () {
	// back to top
	addBackToTop({
	  "diameter": 40,
	  "backgroundColor": "rgba(128,128,128,0.5)"
	});
	
	// Language dropdown
	$(".dropdown-button").click(function(){
		$(".dropdown-content").toggleClass("show");
	});
	
	window.onclick = function(event) {
	  if (!event.target.matches('.dropdown-button')) {
		$(".dropdown-content").removeClass("show");
	  }
	};
});
</script>

<!--/* Global footer */-->
<th:block th:utext="${options['blog_footer_info']}"/>
<th:block th:utext="${options['blog_statistics_code']}"/>
</body>
</html>
